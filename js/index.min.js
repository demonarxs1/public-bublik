"use strict";var buttons=document.querySelectorAll(".demo__tab-buttons button"),contents=document.querySelectorAll(".demo__content > div");buttons.forEach(function(e){var t=e.dataset.id,n=document.getElementById(t);e.addEventListener("click",function(){buttons.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active"),contents.forEach(function(e){return e.classList.add("hide")}),n.classList.remove("hide")})});var synthesisButton=document.querySelector("#synthesis-button"),synthesisText=document.querySelector("#synthesis-text"),synth=window.speechSynthesis;synthesisButton.addEventListener("click",function(e){e.preventDefault(),speak(),synthesisText.blur()});var voicesList=document.querySelector("#voice"),pitch=document.querySelector("#pitch"),rate=document.querySelector("#rate"),voices=[];function populateVoiceList(){voices=synth.getVoices();var e=voicesList.selectedIndex<0?0:voicesList.selectedIndex;voicesList.innerHTML="";for(var t=0;t<voices.length;t++){var n=document.createElement("option");n.textContent=voices[t].name+" ("+voices[t].lang+")",voices[t].default&&(n.textContent+=" -- DEFAULT"),n.setAttribute("data-lang",voices[t].lang),n.setAttribute("data-name",voices[t].name),voicesList.appendChild(n)}voicesList.selectedIndex=e}function speak(){if(synth.speaking)console.error("speechSynthesis.speaking"),synth.cancel(),setTimeout(speak,300);else if(""!==synthesisText.value){var e=new SpeechSynthesisUtterance(synthesisText.value);e.onend=function(){console.log("SpeechSynthesisUtterance.onend")},e.onerror=function(){console.error("SpeechSynthesisUtterance.onerror")};for(var t=voicesList.selectedOptions[0].getAttribute("data-name"),n=0;n<voices.length;n++)voices[n].name===t&&(e.voice=voices[n]);e.onpause=function(e){var t=e.utterance.text.charAt(e.charIndex);console.log("Speech paused at character "+e.charIndex+' of "'+e.utterance.text+'", which is "'+t+'".')},e.pitch=pitch.value,e.rate=rate.value,synth.speak(e)}}populateVoiceList(),void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=populateVoiceList);var recognition,SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,recognitionButton=document.querySelector("#recognition-button"),recognitionResult=document.querySelector("#recognition-result");SpeechRecognition&&((recognition=new SpeechRecognition).lang="ru-RU",recognition.interimResults=!1,recognition.maxAlternatives=1,recognitionButton.onclick=function(){recognition.start()},recognition.onaudiostart=function(){console.log("onaudiostart.")},recognition.onresult=function(e){var t=e.results.length-1,t=e.results[t][0].transcript;t&&(recognitionResult.classList.add("active"),recognitionResult.querySelector("#recognition-text").textContent=t)},recognition.onspeechend=function(){recognition.stop()});